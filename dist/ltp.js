!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ltp=r():t.ltp=r()}(window,(function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var s in t)e.d(n,s,function(r){return t[r]}.bind(null,s));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=1)}([function(t,r,e){"use strict";class n extends Error{constructor(t,r,e){if(super(e),this.CONTEXT_LENGTH=10,this.name="BracketedError",t){let e=r+this.CONTEXT_LENGTH>t.length?t.length:r+this.CONTEXT_LENGTH,n="Missing closing brace: ";n+=t.substr(r,e),this.message=n}}}let s={bracketPairs:{"(":")","{":"}","[":"]"},get(t,r){return r||(r=0),t.substring(r+1,this.findEnd(t,r))},findEnd(t,r){let e,s,a=[];for(let n of Object.keys(this.bracketPairs))t[r]==n&&(e=n,s=this.bracketPairs[n]);if(null==e)throw new n(void 0,void 0,"Expression not starting with a bracket was sent to bracket parser.");a.push(e);let o=r;for(;a.length>0;){if(++o>t.length-1)throw new n(t,r);t[o]==e?a.push(e):t[o]==s&&a.pop()}return o}};t.exports=s},function(t,r,e){"use strict";t.exports=function(t){let r=e(2),n=e(4),s=e(5);var a,o;try{return a=r.clean(t),o=s.parse(a),n.translate(o)}catch(t){console.log(t)}}},function(t,r,e){"use strict";let n=e(0),s=e(3);t.exports=new class{constructor(){this.expression=""}clean(t){return this.expression=t,this.cleanRecursively()}cleanRecursively(){let t=this.expression;for(this.runRegisteredCleaners();t!=this.expression;)t=this.expression,this.runRegisteredCleaners();return this.expression}runRegisteredCleaners(){this.cleanTextColor(),this.convertOperators(),this.cleanLeftRight(),this.cleanText(),this.cleanThingies()}cleanTextColor(){this.replaceFunctionWithParameter("\\textcolor",2,2)}cleanText(){this.cleanFunctionWithParameter("\\text",1)}cleanLeftRight(){this.expression=this.expression.replace(/(\\left)|(\\right)/gi,"")}cleanThingies(){let t=/\[\d+?pt\]/gi;this.expression=this.expression.replace(t,""),t="&",this.expression=this.expression.replace(t," ")}convertOperators(){var t;t=/(\\cdot)|(\\times)/gi,this.expression=this.expression.replace(t,"*"),t="\\div",this.expression=this.expression.replace(t,"/"),t=/(\\leq)|(\\lt)|(\\geq)|(\\gt)/gi,this.expression=this.expression.replace(t,t=>{switch(t){case"\\leq":return"<=";case"\\lt":return"<";case"\\geq":return">=";case"\\gt":return">"}})}indexedReplacement(t,r,e,n){let s=t.slice(0,r)+n;return{expression:s+t.slice(e,t.length),replacementEndPos:s.length-1}}replaceFunctionWithParameter(t,r,e){let a=t,o=this.expression.indexOf(a,0);for(;-1!=o;){let t=o+(a.length-1),i=0;for(let e=0;e<r-1;++e){if(-1==(i=this.expression.indexOf("{",t)))throw new s(this.expression,o,"Missing arguments");t=n.findEnd(this.expression,i)}if(-1==(i=this.expression.indexOf("{",t)))throw new s(this.expression,o,"Missing arguments");let u=n.get(this.expression,i);t=n.findEnd(this.expression,i);for(let a=r;a<e;++a){if(-1==(i=this.expression.indexOf("{",t)))throw new s(this.expression,o,"Missing arguments");t=n.findEnd(this.expression,i)}let c=this.indexedReplacement(this.expression,o,t+1,u);this.expression=c.expression,o=this.expression.indexOf(a,c.replacementEndPos)}}cleanFunctionWithParameter(t,r){let e=t,a=this.expression.indexOf(e,0);for(;-1!=a;){let t=a+(e.length-1);for(let o=0;o<r;++o){let r=this.expression.indexOf("{",t);if(-1==r)throw new s(this.expression,a,"Missing arguments");t=n.findEnd(this.expression,r);let o=this.indexedReplacement(this.expression,a,t+1,"");this.expression=o.expression,a=this.expression.indexOf(e,o.replacementEndPos)}}}}},function(t,r){class e extends Error{constructor(t,r,e){if(super(e),this.name="CleanerError",this.CONTEXT_LENGTH=10,t){let n=r+this.CONTEXT_LENGTH>t.length?t.length:r+this.CONTEXT_LENGTH,s=t.substr(r,n);this.message=e+":"+s}}}t.exports=e},function(t,r,e){"use strict";let n=e(0);class s extends Error{constructor(t){super("Unknown entity encountered."),console.log("Object that caused translator error:"),console.log(t),this.name="TranslatorError",this.problem=t}}let a={translate(t){var r;switch(t.type){case"root":r=this.translateRoot(t);break;case"environment":r=this.translateEnvironment(t);break;case"expression":r=this.translateExpression(t);break;case"function":r=this.translateFunction(t);break;case"calcunit":r=this.translateCalcunit(t);break;case"char":r=this.translateChar(t);break;default:throw new s(t)}return r},translateRoot(t){for(let r of t.arg)this.translateExpression(r)},translateExpression(t){var r,e,n;switch(t.bracketType){case"curly":e="{",n="}";break;case"round":e="(",n=")";break;case"square":e="[",n="]";break;default:e="",n=""}r=e;for(let e of t.arg)switch(e.type){case"root":r+=this.translateRoot(e);break;case"environment":r+=this.translateEnvironment(e);break;case"expression":r+=this.translateExpression(e);break;case"function":r+=this.translateFunction(e);break;case"calcunit":r+=this.translateCalcunit(e);break;case"char":r+=e.arg;break;default:throw new s(e)}return r+=n},translateChar:t=>t.arg,translateFunction(t){let r=t.name,e=this.funcTranslations[r];for(let r=0;r<t.arg.length;++r)t.arg[r]=a.translate(t.arg[r]),"{"!=t.arg[r][0]&&"["!=t.arg[r][0]||(t.arg[r]=n.get(t.arg[r]));return t.exponent?"{"+e(t)+"}^"+this.translate(t.exponent):e(t)},translateCalcunit(t){var r="";for(let e of t.arg)r+=this.translateChar(e);return r},translateRoot(t){var r="";for(let e of t.arg)r+=this.translateExpression(e);return r},funcTranslations:{regular:t=>`${t.arg[0]}(${t.arg[1]})`,abs:t=>`abs(${t.arg[0]})`,sqrt:t=>2==t.arg.length?`root(${t.arg[0]}, ${t.arg[1]})`:`root2(${t.arg[0]})`,integral:t=>2==t.arg.length?`integral(${t.arg[0]}, ${t.arg[1]})`:`definiteintegral(${t.arg[0]}, ${t.arg[1]}, ${t.arg[2]}, ${t.arg[3]})`,fraction:t=>`{{${t.arg[0]}}/{${t.arg[1]}}}`,derivative:t=>`derivation(${t.arg[1]}, ${t.arg[2]})`,latex_function:t=>(t.arg[1]=n.get(t.arg[1]),`function(${t.arg[0]}, ${t.arg[1]})=${t.arg[2]}`),latex_function_inverse:t=>(t.arg[1]=n.get(t.arg[1]),`function_inverse(${t.arg[0]}, ${t.arg[1]})=${t.arg[2]}`),binomial:t=>`choose(${t.arg[0]}, ${t.arg[1]})`,logarithm:t=>`log(${t.arg[0]}, ${t.arg[1]})`,logarithm_10:t=>`log10(${t.arg[0]})`,logarithm_ln:t=>`ln(${t.arg[0]})`,limit:t=>`lim(${t.arg[0]}, ${t.arg[1]}, ${t.arg[2]})`,mean:t=>`mean(${t.arg[0]})`,degrees:t=>`deg(${t.arg[0]})`},translateEnvironment(t){var r;switch(t.envType){case"system":r=this.translateEnvironmentSystem(t);break;case"determinant":r=this.translateEnvironmentDeterminant(t);default:throw new s(t)}return r},translateEnvironmentSystem(t){let r=[];for(let e of t.arg)r.push(this.translate(e));return"system("+r.join(",")+")"}};t.exports=a},function(t,r,e){"use strict";function n(t,r,e,s){this.message=t,this.expected=r,this.found=e,this.location=s,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(n,Error),n.buildMessage=function(t,r){var e={literal:function(t){return'"'+s(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?a(t.parts[r][0])+"-"+a(t.parts[r][1]):a(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function s(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var r,n,s,a=new Array(t.length);for(r=0;r<t.length;r++)a[r]=(s=t[r],e[s.type](s));if(a.sort(),a.length>0){for(r=1,n=1;r<a.length;r++)a[r-1]!==a[r]&&(a[n]=a[r],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(r)+" found."},t.exports={SyntaxError:n,parse:function(t,r){r=void 0!==r?r:{};var e,s={},a={root:Ge},o=Ge,i=function(t){return new sn("root",t)},u=function(t){return new un(t)},c="{",l=Fe("{",!1),h="}",f=Fe("}",!1),p=function(t){let r=[];return r.push(t),new un(r,"curly")},g="(",d=Fe("(",!1),b=")",x=Fe(")",!1),m=function(t){let r=[];return r.push(t),new un(r,"round")},v="[",C=Fe("[",!1),w="]",A=Fe("]",!1),y=function(t){let r=[];return r.push(t),new un(r,"square")},E=function(t){return t},T="^",$=Fe("^",!1),_="\\circ",k=Fe("\\circ",!1),O=function(t){return new an("degrees",[t])},R=Ne("function"),j=function(t){return t},F="f",P=Fe("f",!1),N="g",S=Fe("g",!1),q="h",M=Fe("h",!1),L=function(t){return new cn(t)},G=function(t){return t},H="|",X=Fe("|",!1),W=function(t){return new an("abs",[t])},z="\\displaystyle",U=Fe("\\displaystyle",!1),Z="\\binom",B=Fe("\\binom",!1),D=function(t,r){return new an("binomial",[t,r])},I="\\log",J=Fe("\\log",!1),K="_",Q=Fe("_",!1),V="10",Y=Fe("10",!1),tt=function(t){return new an("logarithm_10",[t])},rt=function(t,r){return new an("logarithm",[t,r])},et="\\ln",nt=Fe("\\ln",!1),st=function(t){return new an("logarithm_ln"[t])},at=function(t,r){return new an("logartihm_10",[r],t)},ot=function(t,r){return new an("logarithm_10",[r],t)},it=function(t,r,e){return new an("logarithm",[r,e],t)},ut=function(t,r){return new an("logarithm_ln",[r],t)},ct="\\lim",lt=Fe("\\lim",!1),ht=function(t,r){return new an("limit",[...t,r])},ft="\\longrightarrow",pt=Fe("\\longrightarrow",!1),gt=function(t,r){return[t,r]},dt="=",bt=Fe("=",!1),xt=function(t,r,e){return new an("latex_function",[t,r,e])},mt="-",vt=Fe("-",!1),Ct="1",wt=Fe("1",!1),At=function(t,r,e){return new an("latex_function_inverse",[t,r,e])},yt="'",Et=Fe("'",!1),Tt="\\prime",$t=Fe("\\prime",!1),_t=function(t,r,e){return new an("derivative",[t,r,e])},kt="\\",Ot=Fe("\\",!1),Rt=function(t,r){return new an("regular",[t,r])},jt=function(t,r,e){return new an("regular",[t,e],r)},Ft=function(t){return new cn(nn[t])},Pt="\\frac",Nt=Fe("\\frac",!1),St=function(t,r){return new an("fraction",[t,r])},qt="\\overline",Mt=Fe("\\overline",!1),Lt=function(t){return new an("mean",[t])},Gt="sinh",Ht=Fe("sinh",!1),Xt="cosh",Wt=Fe("cosh",!1),zt="coth",Ut=Fe("coth",!1),Zt="cos",Bt=Fe("cos",!1),Dt="sec",It=Fe("sec",!1),Jt="tan",Kt=Fe("tan",!1),Qt="cot",Vt=Fe("cot",!1),Yt="ctg",tr=Fe("ctg",!1),rr="csc",er=Fe("csc",!1),nr="sin",sr=Fe("sin",!1),ar="acos",or=Fe("acos",!1),ir="asin",ur=Fe("asin",!1),cr="arcsin",lr=Fe("arcsin",!1),hr="arccos",fr=Fe("arccos",!1),pr="arcctg",gr=Fe("arcctg",!1),dr="arccot",br=Fe("arccot",!1),xr="arctan",mr=Fe("arctan",!1),vr=function(t){return new cn(t)},Cr="\\sqrt",wr=Fe("\\sqrt",!1),Ar=function(t){return new an("sqrt",[t])},yr=function(t,r){return new an("sqrt",[t,r])},Er="\\int",Tr=Fe("\\int",!1),$r="d",_r=Fe("d",!1),kr=function(t,r){return new an("integral",[t,r])},Or=function(t,r,e,n){return new an("integral",[t,r,e,n])},Rr=function(t,r,e,n){return new an("integral",[r,t,e,n])},jr=Ne("environment"),Fr="\\begin",Pr=Fe("\\begin",!1),Nr="{cases}",Sr=Fe("{cases}",!1),qr="\\end",Mr=Fe("\\end",!1),Lr=function(t,r){return t.push(r),new ln("system",t)},Gr="\\\\",Hr=Fe("\\\\",!1),Xr=Ne("number"),Wr=" ",zr=Fe(" ",!1),Ur=function(t){let r=[];for(let e of t)" "!=e&&r.push(e);return new on(r)},Zr=/^[+\-*\/\^=<>._]/,Br=Pe(["+","-","*","/","^","=","<",">",".","_"],!1,!1),Dr=function(t){return new cn(t)},Ir=/^[a-zA-Z+\-*\/]/,Jr=Pe([["a","z"],["A","Z"],"+","-","*","/"],!1,!1),Kr=function(t){return new cn(t)},Qr=function(t){return new cn(nn[t])},Vr=Ne("special symbol"),Yr="\\pi",te=Fe("\\pi",!1),re="\\infty",ee=Fe("\\infty",!1),ne="\\alpha",se=Fe("\\alpha",!1),ae="\\beta",oe=Fe("\\beta",!1),ie="\\lambda",ue=Fe("\\lambda",!1),ce="\\gamma",le=Fe("\\gamma",!1),he="\\epsilon",fe=Fe("\\epsilon",!1),pe="\\rho",ge=Fe("\\rho",!1),de="\\delta",be=Fe("\\delta",!1),xe="\\sigma",me=Fe("\\sigma",!1),ve="\\theta",Ce=Fe("\\theta",!1),we=Ne("whitespace or endline"),Ae=/^[ \t\r\n]/,ye=Pe([" ","\t","\r","\n"],!1,!1),Ee=/^[0-9.]/,Te=Pe([["0","9"],"."],!1,!1),$e=function(t){return new cn(t.join(""))},_e=0,ke=[{line:1,column:1}],Oe=0,Re=[],je=0;if("startRule"in r){if(!(r.startRule in a))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=a[r.startRule]}function Fe(t,r){return{type:"literal",text:t,ignoreCase:r}}function Pe(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Ne(t){return{type:"other",description:t}}function Se(r){var e,n=ke[r];if(n)return n;for(e=r-1;!ke[e];)e--;for(n={line:(n=ke[e]).line,column:n.column};e<r;)10===t.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return ke[r]=n,n}function qe(t,r){var e=Se(t),n=Se(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Me(t){_e<Oe||(_e>Oe&&(Oe=_e,Re=[]),Re.push(t))}function Le(t,r,e){return new n(n.buildMessage(t,r),t,r,e)}function Ge(){var t,r,e;for(t=_e,r=[],e=He();e!==s;)r.push(e),e=He();return r!==s&&(t,r=i(r)),t=r}function He(){var t,r,e;if(t=_e,r=[],(e=Ue())!==s)for(;e!==s;)r.push(e),e=Ue();else r=s;return r!==s&&(t,r=u(r)),(t=r)===s&&(t=Xe())===s&&(t=We())===s&&(t=ze()),t}function Xe(){var r,e,n,a;return r=_e,123===t.charCodeAt(_e)?(e=c,_e++):(e=s,0===je&&Me(l)),e!==s&&(n=Ge())!==s?(125===t.charCodeAt(_e)?(a=h,_e++):(a=s,0===je&&Me(f)),a!==s?(r,r=e=p(n)):(_e=r,r=s)):(_e=r,r=s),r}function We(){var r,e,n,a;return r=_e,40===t.charCodeAt(_e)?(e=g,_e++):(e=s,0===je&&Me(d)),e!==s&&(n=Ge())!==s?(41===t.charCodeAt(_e)?(a=b,_e++):(a=s,0===je&&Me(x)),a!==s?(r,r=e=m(n)):(_e=r,r=s)):(_e=r,r=s),r}function ze(){var r,e,n,a;return r=_e,91===t.charCodeAt(_e)?(e=v,_e++):(e=s,0===je&&Me(C)),e!==s&&(n=Ge())!==s?(93===t.charCodeAt(_e)?(a=w,_e++):(a=s,0===je&&Me(A)),a!==s?(r,r=e=y(n)):(_e=r,r=s)):(_e=r,r=s),r}function Ue(){var r,e;return r=_e,(e=function(){var r;je++,(r=function(){var r,e,n,a;r=_e,92===t.charCodeAt(_e)?(e=kt,_e++):(e=s,0===je&&Me(Ot));e!==s&&(n=Je())!==s&&(a=Ie())!==s?(r,e=Rt(n,a),r=e):(_e=r,r=s);r===s&&(r=function(){var r,e,n,a,o,i;r=_e,92===t.charCodeAt(_e)?(e=kt,_e++):(e=s,0===je&&Me(Ot));e!==s&&(n=Je())!==s&&rn()!==s?(94===t.charCodeAt(_e)?(a=T,_e++):(a=s,0===je&&Me($)),a!==s&&(o=Ze())!==s&&(i=Ie())!==s?(r,e=jt(n,o,i),r=e):(_e=r,r=s)):(_e=r,r=s);return r}());return r}())===s&&(r=function(){var r,e,n,a;r=_e,t.substr(_e,5)===Pt?(e=Pt,_e+=5):(e=s,0===je&&Me(Nt));e!==s&&(n=De())!==s&&(a=De())!==s?(r,e=St(n,a),r=e):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a;r=_e,124===t.charCodeAt(_e)?(e=H,_e++):(e=s,0===je&&Me(X));e!==s&&(n=Ge())!==s?(124===t.charCodeAt(_e)?(a=H,_e++):(a=s,0===je&&Me(X)),a!==s?(r,e=W(n),r=e):(_e=r,r=s)):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n;r=_e,t.substr(_e,9)===qt?(e=qt,_e+=9):(e=s,0===je&&Me(Mt));e!==s&&(n=De())!==s?(r,e=Lt(n),r=e):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a;r=_e,t.substr(_e,5)===Cr?(e=Cr,_e+=5):(e=s,0===je&&Me(wr));e!==s&&(n=De())!==s?(r,e=Ar(n),r=e):(_e=r,r=s);r===s&&(r=_e,t.substr(_e,5)===Cr?(e=Cr,_e+=5):(e=s,0===je&&Me(wr)),e!==s&&(n=ze())!==s&&(a=De())!==s?(r,e=yr(n,a),r=e):(_e=r,r=s));return r}())===s&&(r=function(){var r,e,n,a,o,i,u,c,l,h,f;r=_e,t.substr(_e,13)===z?(e=z,_e+=13):(e=s,0===je&&Me(U));e!==s&&rn()!==s?(t.substr(_e,4)===Er?(n=Er,_e+=4):(n=s,0===je&&Me(Tr)),n!==s&&(a=De())!==s&&(o=rn())!==s?(100===t.charCodeAt(_e)?(i=$r,_e++):(i=s,0===je&&Me(_r)),i!==s&&(u=rn())!==s&&(c=Ke())!==s?(r,e=kr(a,c),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);r===s&&(r=_e,t.substr(_e,13)===z?(e=z,_e+=13):(e=s,0===je&&Me(U)),e!==s&&rn()!==s?(t.substr(_e,4)===Er?(n=Er,_e+=4):(n=s,0===je&&Me(Tr)),n!==s&&(a=rn())!==s?(95===t.charCodeAt(_e)?(o=K,_e++):(o=s,0===je&&Me(Q)),o!==s&&(i=De())!==s?(94===t.charCodeAt(_e)?(u=T,_e++):(u=s,0===je&&Me($)),u!==s&&(c=De())!==s&&(l=De())!==s&&rn()!==s?(100===t.charCodeAt(_e)?(h=$r,_e++):(h=s,0===je&&Me(_r)),h!==s&&rn()!==s&&(f=Ke())!==s?(r,e=Or(i,c,l,f),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s),r===s&&(r=_e,t.substr(_e,13)===z?(e=z,_e+=13):(e=s,0===je&&Me(U)),e!==s&&rn()!==s?(t.substr(_e,4)===Er?(n=Er,_e+=4):(n=s,0===je&&Me(Tr)),n!==s&&(a=rn())!==s?(94===t.charCodeAt(_e)?(o=T,_e++):(o=s,0===je&&Me($)),o!==s&&(i=De())!==s?(95===t.charCodeAt(_e)?(u=K,_e++):(u=s,0===je&&Me(Q)),u!==s&&(c=De())!==s&&(l=De())!==s&&rn()!==s?(100===t.charCodeAt(_e)?(h=$r,_e++):(h=s,0===je&&Me(_r)),h!==s&&rn()!==s&&(f=Ke())!==s?(r,e=Rr(i,c,l,f),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)));return r}())===s&&(r=function(){var r,e,n,a,o;r=_e,t.substr(_e,13)===z?(e=z,_e+=13):(e=s,0===je&&Me(U));e!==s&&rn()!==s?(t.substr(_e,6)===Z?(n=Z,_e+=6):(n=s,0===je&&Me(B)),n!==s&&(a=De())!==s&&(o=De())!==s?(r,e=D(a,o),r=e):(_e=r,r=s)):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a,o,i,u,p,g,d;r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J));e!==s&&(n=rn())!==s?(95===t.charCodeAt(_e)?(a=K,_e++):(a=s,0===je&&Me(Q)),a!==s?(o=_e,123===t.charCodeAt(_e)?(i=c,_e++):(i=s,0===je&&Me(l)),i!==s&&(u=rn())!==s?(t.substr(_e,2)===V?(p=V,_e+=2):(p=s,0===je&&Me(Y)),p!==s&&(g=rn())!==s?(125===t.charCodeAt(_e)?(d=h,_e++):(d=s,0===je&&Me(f)),d!==s?o=i=[i,u,p,g,d]:(_e=o,o=s)):(_e=o,o=s)):(_e=o,o=s),o===s&&(t.substr(_e,2)===V?(o=V,_e+=2):(o=s,0===je&&Me(Y))),o!==s&&(i=De())!==s?(r,e=tt(i),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);r===s&&(r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J)),e!==s&&(n=De())!==s?(r,e=tt(n),r=e):(_e=r,r=s),r===s&&(r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J)),e!==s&&(n=rn())!==s?(95===t.charCodeAt(_e)?(a=K,_e++):(a=s,0===je&&Me(Q)),a!==s&&(o=De())!==s&&(i=De())!==s?(r,e=rt(o,i),r=e):(_e=r,r=s)):(_e=r,r=s),r===s&&(r=_e,t.substr(_e,3)===et?(e=et,_e+=3):(e=s,0===je&&Me(nt)),e!==s&&(n=De())!==s?(r,e=st(n),r=e):(_e=r,r=s),r===s&&(r=function(){var r,e,n,a,o,i,u,p,g,d,b;r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J));e!==s&&rn()!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&(a=Ze())!==s?(95===t.charCodeAt(_e)?(o=K,_e++):(o=s,0===je&&Me(Q)),o!==s?(i=_e,123===t.charCodeAt(_e)?(u=c,_e++):(u=s,0===je&&Me(l)),u!==s&&(p=rn())!==s?(t.substr(_e,2)===V?(g=V,_e+=2):(g=s,0===je&&Me(Y)),g!==s&&(d=rn())!==s?(125===t.charCodeAt(_e)?(b=h,_e++):(b=s,0===je&&Me(f)),b!==s?i=u=[u,p,g,d,b]:(_e=i,i=s)):(_e=i,i=s)):(_e=i,i=s),i===s&&(t.substr(_e,2)===V?(i=V,_e+=2):(i=s,0===je&&Me(Y))),i!==s&&(u=De())!==s?(r,e=at(a,u),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);r===s&&(r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J)),e!==s&&rn()!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&(a=Ze())!==s&&(o=De())!==s?(r,e=ot(a,o),r=e):(_e=r,r=s)):(_e=r,r=s),r===s&&(r=_e,t.substr(_e,4)===I?(e=I,_e+=4):(e=s,0===je&&Me(J)),e!==s&&rn()!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&(a=Ze())!==s?(95===t.charCodeAt(_e)?(o=K,_e++):(o=s,0===je&&Me(Q)),o!==s&&(i=De())!==s&&(u=De())!==s?(r,e=it(a,i,u),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s),r===s&&(r=_e,t.substr(_e,3)===et?(e=et,_e+=3):(e=s,0===je&&Me(nt)),e!==s&&rn()!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&(a=Ze())!==s&&(o=De())!==s?(r,e=ut(a,o),r=e):(_e=r,r=s)):(_e=r,r=s))));return r}()))));return r}())===s&&(r=function(){var r,e,n,a,o,i;r=_e,t.substr(_e,13)===z?(e=z,_e+=13):(e=s,0===je&&Me(U));e!==s&&rn()!==s?(t.substr(_e,4)===ct?(n=ct,_e+=4):(n=s,0===je&&Me(lt)),n!==s&&rn()!==s?(95===t.charCodeAt(_e)?(a=K,_e++):(a=s,0===je&&Me(Q)),a!==s&&rn()!==s&&(o=function(){var r,e,n,a,o,i;r=_e,123===t.charCodeAt(_e)?(e=c,_e++):(e=s,0===je&&Me(l));e!==s&&rn()!==s&&(n=Ke())!==s&&rn()!==s?(t.substr(_e,15)===ft?(a=ft,_e+=15):(a=s,0===je&&Me(pt)),a!==s&&rn()!==s&&(o=Ke())!==s&&rn()!==s?(125===t.charCodeAt(_e)?(i=h,_e++):(i=s,0===je&&Me(f)),i!==s?(r,e=gt(n,o),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);return r}())!==s&&(i=De())!==s?(r,e=ht(o,i),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a,o,i,u,c;r=_e,(e=Be())!==s&&rn()!==s?(39===t.charCodeAt(_e)?(n=yt,_e++):(n=s,0===je&&Me(Et)),n===s&&(t.substr(_e,6)===Tt?(n=Tt,_e+=6):(n=s,0===je&&Me($t))),n!==s&&rn()!==s?(40===t.charCodeAt(_e)?(a=g,_e++):(a=s,0===je&&Me(d)),a!==s&&rn()!==s&&(o=Ke())!==s&&rn()!==s?(41===t.charCodeAt(_e)?(i=b,_e++):(i=s,0===je&&Me(x)),i!==s&&rn()!==s?(61===t.charCodeAt(_e)?(u=dt,_e++):(u=s,0===je&&Me(bt)),u!==s&&(c=Ge())!==s?(r,e=_t(e,o,c),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a,o;r=_e,(e=Be())!==s&&rn()!==s&&(n=We())!==s?(61===t.charCodeAt(_e)?(a=dt,_e++):(a=s,0===je&&Me(bt)),a!==s&&(o=Ge())!==s?(r,e=xt(e,n,o),r=e):(_e=r,r=s)):(_e=r,r=s);return r}())===s&&(r=function(){var r,e,n,a,o,i,u,p,g,d;r=_e,(e=Be())!==s&&rn()!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&rn()!==s?(123===t.charCodeAt(_e)?(a=c,_e++):(a=s,0===je&&Me(l)),a!==s&&rn()!==s?(45===t.charCodeAt(_e)?(o=mt,_e++):(o=s,0===je&&Me(vt)),o!==s?(49===t.charCodeAt(_e)?(i=Ct,_e++):(i=s,0===je&&Me(wt)),i!==s&&rn()!==s?(125===t.charCodeAt(_e)?(u=h,_e++):(u=s,0===je&&Me(f)),u!==s&&rn()!==s&&(p=We())!==s?(61===t.charCodeAt(_e)?(g=dt,_e++):(g=s,0===je&&Me(bt)),g!==s&&(d=Ge())!==s?(r,e=At(e,p,d),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);return r}());je--,r===s&&(s,0===je&&Me(R));return r}())!==s&&(r,e=E(e)),(r=e)===s&&(r=_e,(e=function(){var r,e,n,a,o,i,u,p,g,d;r=_e,(e=en())!==s&&(n=rn())!==s?(94===t.charCodeAt(_e)?(a=T,_e++):(a=s,0===je&&Me($)),a!==s&&(o=rn())!==s?(123===t.charCodeAt(_e)?(i=c,_e++):(i=s,0===je&&Me(l)),i!==s&&(u=rn())!==s?(t.substr(_e,5)===_?(p=_,_e+=5):(p=s,0===je&&Me(k)),p!==s&&(g=rn())!==s?(125===t.charCodeAt(_e)?(d=h,_e++):(d=s,0===je&&Me(f)),d!==s?(r,e=O(e),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s);r===s&&(r=_e,(e=De())!==s?(94===t.charCodeAt(_e)?(n=T,_e++):(n=s,0===je&&Me($)),n!==s&&(a=rn())!==s?(123===t.charCodeAt(_e)?(o=c,_e++):(o=s,0===je&&Me(l)),o===s&&(o=null),o!==s&&(i=rn())!==s?(t.substr(_e,5)===_?(u=_,_e+=5):(u=s,0===je&&Me(k)),u!==s&&(p=rn())!==s?(125===t.charCodeAt(_e)?(g=h,_e++):(g=s,0===je&&Me(f)),g===s&&(g=null),g!==s?(r,e=O(e),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s));return r}())!==s&&(r,e=E(e)),(r=e)===s&&(r=_e,(e=function(){var r;je++,r=function(){var r,e,n,a,o,i,u;r=_e,t.substr(_e,6)===Fr?(e=Fr,_e+=6):(e=s,0===je&&Me(Pr));if(e!==s)if(rn()!==s)if(t.substr(_e,7)===Nr?(n=Nr,_e+=7):(n=s,0===je&&Me(Sr)),n!==s){if(a=[],(o=Qe())!==s)for(;o!==s;)a.push(o),o=Qe();else a=s;a!==s&&(o=Ge())!==s?(t.substr(_e,4)===qr?(i=qr,_e+=4):(i=s,0===je&&Me(Mr)),i!==s&&rn()!==s?(t.substr(_e,7)===Nr?(u=Nr,_e+=7):(u=s,0===je&&Me(Sr)),u!==s?(r,e=Lr(a,o),r=e):(_e=r,r=s)):(_e=r,r=s)):(_e=r,r=s)}else _e=r,r=s;else _e=r,r=s;else _e=r,r=s;return r}(),je--,r===s&&(s,0===je&&Me(jr));return r}())!==s&&(r,e=E(e)),(r=e)===s&&(r=_e,(e=function(){var r,e,n;je++,r=_e,e=[],(n=en())===s&&(n=Ye())===s&&(n=Ve())===s&&(32===t.charCodeAt(_e)?(n=Wr,_e++):(n=s,0===je&&Me(zr)));if(n!==s)for(;n!==s;)e.push(n),(n=en())===s&&(n=Ye())===s&&(n=Ve())===s&&(32===t.charCodeAt(_e)?(n=Wr,_e++):(n=s,0===je&&Me(zr)));else e=s;e!==s&&(r,e=Ur(e));je--,(r=e)===s&&(e=s,0===je&&Me(Xr));return r}())!==s&&(r,e=E(e)),r=e))),r}function Ze(){var t,r;return t=_e,rn()!==s&&(r=Xe())!==s&&rn()!==s?(t,t=j(r)):(_e=t,t=s),t===s&&(t=_e,rn()!==s&&(r=Ye())!==s&&rn()!==s?(t,t=j(r)):(_e=t,t=s),t===s&&(t=_e,rn()!==s&&(r=en())!==s&&rn()!==s?(t,t=j(r)):(_e=t,t=s))),t}function Be(){var r,e;return r=_e,102===t.charCodeAt(_e)?(e=F,_e++):(e=s,0===je&&Me(P)),e===s&&(103===t.charCodeAt(_e)?(e=N,_e++):(e=s,0===je&&Me(S)),e===s&&(104===t.charCodeAt(_e)?(e=q,_e++):(e=s,0===je&&Me(M)))),e!==s&&(r,e=L(e)),r=e}function De(){var t,r;return t=_e,rn()!==s&&(r=Xe())!==s&&rn()!==s?(t,t=G(r)):(_e=t,t=s),t===s&&(t=_e,rn()!==s?((r=Ye())===s&&(r=en()),r!==s&&rn()!==s?(t,t=G(r)):(_e=t,t=s)):(_e=t,t=s)),t}function Ie(){var t,r;return t=_e,rn()!==s&&(r=Xe())!==s&&rn()!==s?(t,t=j(r)):(_e=t,t=s),t===s&&(t=_e,rn()!==s&&(r=tn())!==s&&rn()!==s?(t,t=Ft(r)):(_e=t,t=s)),t}function Je(){var r,e;return r=_e,t.substr(_e,4)===Gt?(e=Gt,_e+=4):(e=s,0===je&&Me(Ht)),e===s&&(t.substr(_e,4)===Xt?(e=Xt,_e+=4):(e=s,0===je&&Me(Wt)),e===s&&(t.substr(_e,4)===zt?(e=zt,_e+=4):(e=s,0===je&&Me(Ut)),e===s&&(t.substr(_e,3)===Zt?(e=Zt,_e+=3):(e=s,0===je&&Me(Bt)),e===s&&(t.substr(_e,3)===Dt?(e=Dt,_e+=3):(e=s,0===je&&Me(It)),e===s&&(t.substr(_e,3)===Jt?(e=Jt,_e+=3):(e=s,0===je&&Me(Kt)),e===s&&(t.substr(_e,3)===Qt?(e=Qt,_e+=3):(e=s,0===je&&Me(Vt)),e===s&&(t.substr(_e,3)===Yt?(e=Yt,_e+=3):(e=s,0===je&&Me(tr)),e===s&&(t.substr(_e,3)===rr?(e=rr,_e+=3):(e=s,0===je&&Me(er)),e===s&&(t.substr(_e,3)===nr?(e=nr,_e+=3):(e=s,0===je&&Me(sr)),e===s&&(t.substr(_e,4)===ar?(e=ar,_e+=4):(e=s,0===je&&Me(or)),e===s&&(t.substr(_e,4)===ir?(e=ir,_e+=4):(e=s,0===je&&Me(ur)),e===s&&(t.substr(_e,6)===cr?(e=cr,_e+=6):(e=s,0===je&&Me(lr)),e===s&&(t.substr(_e,6)===hr?(e=hr,_e+=6):(e=s,0===je&&Me(fr)),e===s&&(t.substr(_e,6)===pr?(e=pr,_e+=6):(e=s,0===je&&Me(gr)),e===s&&(t.substr(_e,6)===dr?(e=dr,_e+=6):(e=s,0===je&&Me(br)),e===s&&(t.substr(_e,6)===xr?(e=xr,_e+=6):(e=s,0===je&&Me(mr)))))))))))))))))),e!==s&&(r,e=vr(e)),r=e}function Ke(){var t;return(t=Ye())===s&&(t=en()),t}function Qe(){var r,e,n;return r=_e,(e=Ge())!==s?(t.substr(_e,2)===Gr?(n=Gr,_e+=2):(n=s,0===je&&Me(Hr)),n!==s?(r,r=e=G(e)):(_e=r,r=s)):(_e=r,r=s),r}function Ve(){var r,e;return r=_e,Zr.test(t.charAt(_e))?(e=t.charAt(_e),_e++):(e=s,0===je&&Me(Br)),e!==s&&(r,e=Dr(e)),r=e}function Ye(){var r,e;return r=_e,Ir.test(t.charAt(_e))?(e=t.charAt(_e),_e++):(e=s,0===je&&Me(Jr)),e!==s&&(r,e=Kr(e)),(r=e)===s&&(r=_e,(e=tn())!==s&&(r,e=Qr(e)),r=e),r}function tn(){var r;return je++,t.substr(_e,3)===Yr?(r=Yr,_e+=3):(r=s,0===je&&Me(te)),r===s&&(t.substr(_e,6)===re?(r=re,_e+=6):(r=s,0===je&&Me(ee)),r===s&&(t.substr(_e,6)===ne?(r=ne,_e+=6):(r=s,0===je&&Me(se)),r===s&&(t.substr(_e,5)===ae?(r=ae,_e+=5):(r=s,0===je&&Me(oe)),r===s&&(t.substr(_e,7)===ie?(r=ie,_e+=7):(r=s,0===je&&Me(ue)),r===s&&(t.substr(_e,6)===ce?(r=ce,_e+=6):(r=s,0===je&&Me(le)),r===s&&(t.substr(_e,8)===he?(r=he,_e+=8):(r=s,0===je&&Me(fe)),r===s&&(t.substr(_e,4)===pe?(r=pe,_e+=4):(r=s,0===je&&Me(ge)),r===s&&(t.substr(_e,6)===de?(r=de,_e+=6):(r=s,0===je&&Me(be)),r===s&&(t.substr(_e,6)===xe?(r=xe,_e+=6):(r=s,0===je&&Me(me)),r===s&&(t.substr(_e,6)===ve?(r=ve,_e+=6):(r=s,0===je&&Me(Ce)))))))))))),je--,r===s&&(s,0===je&&Me(Vr)),r}function rn(){var r,e;for(je++,r=[],Ae.test(t.charAt(_e))?(e=t.charAt(_e),_e++):(e=s,0===je&&Me(ye));e!==s;)r.push(e),Ae.test(t.charAt(_e))?(e=t.charAt(_e),_e++):(e=s,0===je&&Me(ye));return je--,r===s&&(e=s,0===je&&Me(we)),r}function en(){var r,e,n;if(r=_e,e=[],Ee.test(t.charAt(_e))?(n=t.charAt(_e),_e++):(n=s,0===je&&Me(Te)),n!==s)for(;n!==s;)e.push(n),Ee.test(t.charAt(_e))?(n=t.charAt(_e),_e++):(n=s,0===je&&Me(Te));else e=s;return e!==s&&(r,e=$e(e)),r=e}let nn={"\\pi":"π","\\infty":"∞","\\alpha":"α","\\epsilon":"ε","\\beta":"β","\\lambda":"λ","\\gamma":"γ","\\rho":"ρ","\\delta":"δ","\\sigma":"σ","\\theta":"θ"};class sn{constructor(t,r){this.arg=r,this.type=t}}class an extends sn{constructor(t,r,e){super("function",r),this.name=t,this.exponent=e}}class on extends sn{constructor(t){super("calcunit",t)}}class un extends sn{constructor(t,r){super("expression",t),this.bracketType=r}}class cn extends sn{constructor(t){super("char",t)}}class ln extends sn{constructor(t,r){super("environment",r),this.envType=t}}if((e=o())!==s&&_e===t.length)return e;throw e!==s&&_e<t.length&&Me({type:"end"}),Le(Re,Oe<t.length?t.charAt(Oe):null,Oe<t.length?qe(Oe,Oe+1):qe(Oe,Oe))}}}])}));